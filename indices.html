<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Psych Indices Fixer — Correct XML Offsets</title>
<link rel="icon" href='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle fill="cyan" cx="50" cy="50" r="45"/></svg>' />
<style>
*{box-sizing:border-box;font-family:monospace;margin:0;padding:0}
body{background:#0a0a0a;color:#eee;display:flex;flex-direction:column;align-items:center;min-height:100vh;padding:20px;gap:20px}
main{width:100%;max-width:700px;display:flex;flex-direction:column;gap:15px}
textarea{width:100%;height:250px;background:#111;color:#0ff;border:1px solid #333;padding:10px;border-radius:10px;resize:vertical}
button{background:#0ff;color:#000;border:none;padding:10px 15px;border-radius:10px;cursor:pointer;font-weight:bold}
button:hover{background:#6ff}
nav a{color:#0ff;text-decoration:none;font-weight:bold}
nav{display:flex;gap:15px}
</style>
</head>
<body>
<nav>
  <a href="index.html">Plist → XML Converter</a>
  <a href="indices.html">Psych Indices Fixer</a>
</nav>

<main>
<h2>Psych Engine Indices Corrector</h2>
<textarea id="xmlInput" placeholder="Paste your converted XML here..."></textarea>
<label for="offsetX">Offset X correction:</label>
<input type="number" id="offsetX" value="0" step="1" style="width:100px;background:#111;color:#0ff;border:1px solid #333;border-radius:5px;padding:5px">
<label for="offsetY">Offset Y correction:</label>
<input type="number" id="offsetY" value="0" step="1" style="width:100px;background:#111;color:#0ff;border:1px solid #333;border-radius:5px;padding:5px">
<button id="fixBtn">Fix Indices</button>
<textarea id="fixedOutput" placeholder="Fixed XML will appear here..."></textarea>
</main>

<script>
function fixOffsets(xml, offX, offY){
  return xml.replace(/<SubTexture ([^>]*?)x="(.*?)" y="(.*?)"/g,(m,rest,x,y)=>{
    const newX=parseFloat(x)+offX;
    const newY=parseFloat(y)+offY;
    return `<SubTexture ${rest}x="${newX}" y="${newY}"`;
  });
}

document.getElementById('fixBtn').onclick=()=>{
  const xml=document.getElementById('xmlInput').value;
  const offX=parseFloat(document.getElementById('offsetX').value)||0;
  const offY=parseFloat(document.getElementById('offsetY').value)||0;
  document.getElementById('fixedOutput').value=fixOffsets(xml,offX,offY);
};
</script>
</body>
</
