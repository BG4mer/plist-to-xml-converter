<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Plist → XML Converter</title>

<!-- Embedded SVG favicon (neon gear) -->
<link rel="icon" href='data:image/svg+xml;utf8,
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <rect width="100" height="100" fill="%23010b13"/>
  <g transform="translate(50,50)">
    <circle r="10" fill="%23000"/>
    <circle r="5" fill="%2300e6ff"/>
    <path d="M-12-22 L12-22 L22-12 L32 0 L22 12 L12 22 L-12 22 L-22 12 L-32 0 L-22 -12 Z" fill="%2300ffe6" opacity="0.9"/>
  </g>
</svg>' type="image/svg+xml">

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg-1: #020617;
  --accent-1: #00fff2;
  --accent-2: #7a00ff;
  --accent-3: #00ff77;
  --accent-4: #ff5a3c;
  --panel-radius: 14px;
  --max-width: 1200px;
}
html,body{height:100%;margin:0;font-family:'Space Mono', monospace;color:#dffefe;}
body{
  background:
    radial-gradient(600px 400px at 10% 10%, rgba(10,10,30,0.45), transparent 10%),
    radial-gradient(800px 500px at 90% 90%, rgba(30,10,40,0.35), transparent 10%),
    linear-gradient(180deg,var(--bg-1),#000 60%);
  display:flex; justify-content:center; padding:36px 20px;
}

.shell{ width:100%; max-width:var(--max-width); display:grid; gap:22px; grid-template-columns:1fr 480px; align-items:start;}
@media (max-width:1100px){ .shell{grid-template-columns:1fr;} .right-col{order:2} }

.panel{
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:var(--panel-radius); padding:20px; box-shadow:0 6px 30px rgba(0,0,0,0.6);
  border:1px solid rgba(255,255,255,0.03); backdrop-filter: blur(8px);
}

.brand{ display:flex; gap:14px; align-items:center; margin-bottom:14px; }
.logo{ width:62px; height:62px; border-radius:12px; display:flex; align-items:center; justify-content:center; background:linear-gradient(135deg,var(--accent-1),var(--accent-2)); box-shadow: 0 6px 30px rgba(0,255,230,0.08); }
.title .main{ font-family:'Orbitron'; font-weight:700; font-size:20px; background:linear-gradient(90deg,var(--accent-1),var(--accent-2)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
.title .sub{ font-size:12px; color:rgba(255,255,255,0.55); margin-top:4px; }

.controls{ display:flex; gap:12px; margin-top:12px; align-items:center; flex-wrap:wrap; }
.file-like{ background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:10px; padding:8px 12px; color:var(--accent-1); border:1px solid rgba(0,255,230,0.08); display:flex; gap:8px; align-items:center; }
.file-like input[type="file"]{ display:none; }
.btn{ padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:700; border:none; color:#001; background:linear-gradient(90deg,var(--accent-1),var(--accent-2)); box-shadow:0 8px 30px rgba(0,170,255,0.08); }
.btn.ghost{ background:transparent; color:var(--accent-1); border:1px solid rgba(0,255,240,0.08); box-shadow:none; }
.input{ width:100%; margin-top:12px; border-radius:12px; padding:12px; background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); color:#bff; font-size:13px; box-shadow: inset 0 1px 0 rgba(255,255,255,0.015); }

.plist-box{ margin-top:14px; height:360px; overflow:auto; white-space:pre-wrap; resize:vertical; font-size:13px; }

.theme-row{ display:flex; gap:8px; margin-top:14px; align-items:center; }
.theme-swatch{ width:40px; height:40px; border-radius:9px; cursor:pointer; display:inline-flex; align-items:center; justify-content:center; color:#001; font-weight:700; border:1px solid rgba(0,0,0,0.2); box-shadow: 0 6px 22px rgba(0,0,0,0.5); }
.theme-swatch.auto{ width:auto; padding:8px 12px; border-radius:10px; font-size:13px; }

.right-col{ position:relative; }
.output-panel{ position:sticky; top:36px; }
.output-header{ display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:10px; }
.xml-output{ width:100%; min-height:480px; max-height:70vh; overflow:auto; padding:16px; border-radius:12px; background:linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.45)); border:1px solid rgba(255,255,255,0.03); box-shadow: inset 0 1px 0 rgba(255,255,255,0.02), 0 10px 40px rgba(0,0,0,0.6); font-size:13px; line-height:1.5; white-space:pre; color:#d9fff8; font-family:'Space Mono', monospace; }

.xml-toolbar{ display:flex; gap:8px; align-items:center; }
.copy-btn{ padding:10px 14px; border-radius:10px; background:linear-gradient(90deg,var(--accent-1),var(--accent-2)); border:none; font-weight:700; cursor:pointer; color:#001; box-shadow:0 8px 30px rgba(0,170,255,0.08); }
.copy-btn.copied{ transform:scale(.98); filter:brightness(1.08) saturate(1.1); }
.download-btn{ padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:#bff; cursor:pointer; }
.credits{ text-align:center; color:rgba(255,255,255,0.4); font-size:12px; margin-top:18px; }

body.theme-blue .logo{ background:linear-gradient(135deg,var(--accent-1),var(--accent-2)); }
body.theme-green .logo{ background:linear-gradient(135deg,var(--accent-3), #00d66a); }
body.theme-red .logo{ background:linear-gradient(135deg,var(--accent-4), #ff8a5a); }

/* drag & drop zone */
#dropZone{ margin-top:12px; border:2px dashed rgba(255,255,255,0.2); border-radius:12px; padding:16px; text-align:center; color:rgba(255,255,255,0.5); transition:0.2s; }
#dropZone.hover{ border-color:#00fff2; color:#00fff2; }

/* mobile tweaks */
@media (max-width:600px){
  .shell{ padding:20px; grid-template-columns:1fr;}
  .plist-box{ height:250px; font-size:12px; }
  .xml-output{ min-height:300px; font-size:12px; }
}
</style>
</head>
<body class="theme-blue">

<div class="shell">

  <div class="panel left-panel">
    <div class="brand">
      <div class="logo" aria-hidden>
        <svg viewBox="0 0 24 24" width="36" height="36" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="3" fill="#001"/><circle cx="12" cy="12" r="2.6" fill="#00e6ff"/><path d="M12 2v3M12 19v3M2 12h3M19 12h3M4.5 4.5l2.1 2.1M17.4 17.4l2.1 2.1M4.5 19.5l2.1-2.1M17.4 6.6l2.1-2.1" stroke="#00fff2" stroke-width="1.2"/></svg>
      </div>
      <div class="title">
        <div class="main">Plist → XML</div>
        <div class="sub">frameX / frameY converter</div>
      </div>
    </div>

    <input type="text" id="imageNameInput" placeholder="Image name (optional)" class="input">
    
    <div id="dropZone">Drop your .plist file here</div>
    
    <textarea id="plistInput" class="plist-box input" placeholder="Paste your plist content here..."></textarea>

    <div class="controls">
      <button class="btn" id="convertBtn">Convert</button>
      <button class="btn ghost" id="clearBtn">Clear</button>
    </div>

    <div class="theme-row">
      <div class="theme-swatch" onclick="setTheme('blue')">Blue</div>
      <div class="theme-swatch" onclick="setTheme('green')">Green</div>
      <div class="theme-swatch" onclick="setTheme('red')">Red</div>
    </div>

  </div>

  <div class="panel right-col output-panel">
    <div class="output-header">
      <div>XML Output</div>
      <div class="xml-toolbar">
        <button class="copy-btn" id="copyBtn">Copy</button>
        <button class="download-btn" id="downloadBtn">Download</button>
      </div>
    </div>
    <pre id="xmlOutput" class="xml-output"></pre>
  </div>

</div>

<div class="credits">Made with ❤️ by BGamer</div>

<script>
// Theme persistence
function setTheme(t){
  document.body.classList.remove('theme-blue','theme-green','theme-red');
  document.body.classList.add('theme-'+t);
  localStorage.setItem('plistTheme', t);
}
const savedTheme = localStorage.getItem('plistTheme');
if(savedTheme) setTheme(savedTheme);

// Conversion logic
function convertPlistToXmlBasic(plistText, imageName=''){
    const regex = /<key>(.*?)<\/key>\s*<dict>\s*<key>x<\/key><integer>(\d+)<\/integer>\s*<key>y<\/key><integer>(\d+)<\/integer>\s*<key>width<\/key><integer>(\d+)<\/integer>\s*<key>height<\/key><integer>(\d+)<\/integer>/g;
    let xml = `<TextureAtlas imagePath="${imageName || 'texture.png'}">\n`;
    let match;
    while(match = regex.exec(plistText)){
        xml += `\t<SubTexture name="${match[1]}" x="${match[2]}" y="${match[3]}" width="${match[4]}" height="${match[5]}" />\n`;
    }
    xml += `</TextureAtlas>`;
    return xml;
}

function convertPlistToXml(plistText, imageName=''){
    let xml = convertPlistToXmlBasic(plistText, imageName);
    // simple beautifier: indent SubTexture lines
    xml = xml.replace(/<SubTexture/g, '\t<SubTexture').replace(/<\/TextureAtlas>/, '</TextureAtlas>');
    return xml;
}

// Elements
const plistInput = document.getElementById('plistInput');
const xmlOutput = document.getElementById('xmlOutput');
const convertBtn = document.getElementById('convertBtn');
const imageNameInput = document.getElementById('imageNameInput');
const copyBtn = document.getElementById('copyBtn');
const downloadBtn = document.getElementById('downloadBtn');
const clearBtn = document.getElementById('clearBtn');
const dropZone = document.getElementById('dropZone');

// Convert button
convertBtn.addEventListener('click', ()=>{
    const text = plistInput.value.trim();
    const imageNameManual = imageNameInput.value.trim();
    if(text) xmlOutput.textContent = convertPlistToXml(text, imageNameManual);
});

// Live preview
plistInput.addEventListener('input', () => convertBtn.click());
imageNameInput.addEventListener('input', () => convertBtn.click());

// Copy output
copyBtn.addEventListener('click', () => {
    navigator.clipboard.writeText(xmlOutput.textContent).then(()=>{
        copyBtn.classList.add('copied');
        setTimeout(()=>copyBtn.classList.remove('copied'),300);
    });
});

// Download XML
downloadBtn.addEventListener('click', ()=>{
    const blob = new Blob([xmlOutput.textContent], {type:'text/xml'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = (imageNameInput.value.trim() || 'texture') + '.xml';
    a.click();
});

// Clear
clearBtn.addEventListener('click', ()=>{
    plistInput.value = '';
    xmlOutput.textContent = '';
    imageNameInput.value = '';
});

// Drag & drop
dropZone.addEventListener('dragover', e=>{ e.preventDefault(); dropZone.classList.add('hover'); });
dropZone.addEventListener('dragleave', e=>{ dropZone.classList.remove('hover'); });
dropZone.addEventListener('drop', e=>{
    e.preventDefault(); dropZone.classList.remove('hover');
    const file = e.dataTransfer.files[0];
    if(file && /\.(plist|xml)$/i.test(file.name)){
        const reader = new FileReader();
        reader.onload = () => { plistInput.value = reader.result; convertBtn.click(); };
        reader.readAsText(file);
    }
});
</script>
</body>
</html>
